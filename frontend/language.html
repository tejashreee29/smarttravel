<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Language â€¢ TravelPlan</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
  <nav class="topnav">
    <div class="brand"><a href="dashboard.html">TravelPlan</a></div>
    <div class="nav-actions">
      <a href="dashboard.html">Dashboard</a>
      <a href="index.html">Sign Out</a>
    </div>
  </nav>

  <main class="container">
    <header class="page-header">
      <h1>Language Translator</h1>
      <p>Learn essential phrases for your trip</p>
    </header>

    <div class="translator-container">
      <div class="language-select">
        <div class="select-group">
          <label for="source-language"><i class="fas fa-language"></i> From:</label>
          <select id="source-language" class="form-select">
            <option value="en">English</option>
            <option value="fr">French</option>
            <option value="es">Spanish</option>
            <option value="de">German</option>
            <option value="it">Italian</option>
            <option value="ja">Japanese</option>
            <option value="zh">Chinese</option>
          </select>
        </div>
        
        <div class="swap-languages">
          <button id="swap-btn" onclick="swapLanguages()"><i class="fas fa-exchange-alt"></i></button>
        </div>
        
        <div class="select-group">
          <label for="target-language"><i class="fas fa-globe"></i> To:</label>
          <select id="target-language" class="form-select">
            <option value="fr">French</option>
            <option value="es">Spanish</option>
            <option value="de">German</option>
            <option value="it">Italian</option>
            <option value="ja">Japanese</option>
            <option value="zh">Chinese</option>
            <option value="en">English</option>
          </select>
        </div>
      </div>

      <div class="translation-box">
        <div class="input-area">
          <textarea id="source-text" placeholder="Enter text to translate"></textarea>
        </div>
        
        <button id="translate-btn" onclick="translateText()" class="btn btn-primary">
          <i class="fas fa-language"></i> Translate
        </button>
        
        <div class="output-area">
          <div id="translation-result" class="translation-result"></div>
        </div>
      </div>
    </div>

    <div class="phrase-book">
      <h2><i class="fas fa-book"></i> Common Travel Phrases</h2>
      <div class="phrase-list">
        <div class="phrase-item">
          <p>Hello / Goodbye</p>
          <button onclick="translatePhrase('Hello')" class="btn btn-sm">Translate</button>
        </div>
        <div class="phrase-item">
          <p>Thank you / Please</p>
          <button onclick="translatePhrase('Thank you')" class="btn btn-sm">Translate</button>
        </div>
        <div class="phrase-item">
          <p>Yes / No</p>
          <button onclick="translatePhrase('Yes')" class="btn btn-sm">Translate</button>
        </div>
        <div class="phrase-item">
          <p>Where is...?</p>
          <button onclick="translatePhrase('Where is')" class="btn btn-sm">Translate</button>
        </div>
        <div class="phrase-item">
          <p>How much does it cost?</p>
          <button onclick="translatePhrase('How much does it cost')" class="btn btn-sm">Translate</button>
        </div>
        <div class="phrase-item">
          <p>I need help.</p>
          <button onclick="translatePhrase('I need help')" class="btn btn-sm">Translate</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    const apiBaseUrl = 'http://localhost:5001';
    async function translateText() {
      const sourceText = document.getElementById('source-text').value.trim();
      const sourceLanguage = document.getElementById('source-language').value;
      const targetLanguage = document.getElementById('target-language').value;
      const out = document.getElementById('translation-result');

      if (!sourceText) { alert('Please enter text to translate'); return; }
      out.textContent = 'Translating...';
      try {
        const r = await fetch(`${apiBaseUrl}/api/language/translate`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ q: sourceText, source: sourceLanguage, target: targetLanguage })
        });
        const data = await r.json();
        if (data && data.translatedText) out.textContent = data.translatedText; else out.textContent = 'No translation available';
      } catch (e) {
        out.textContent = 'Translation failed';
      }
    }

    function translatePhrase(phrase) {
      document.getElementById('source-text').value = phrase;
      translateText();
    }
    
    function swapLanguages() {
      const sourceLanguage = document.getElementById('source-language');
      const targetLanguage = document.getElementById('target-language');
      const sourceText = document.getElementById('source-text');
      const translationResult = document.getElementById('translation-result');
      
      // Swap languages
      const tempLang = sourceLanguage.value;
      sourceLanguage.value = targetLanguage.value;
      targetLanguage.value = tempLang;
      
      // Swap text if there's a translation result
      if (translationResult.textContent) {
        sourceText.value = translationResult.textContent;
        translationResult.textContent = '';
      }
    }
  </script>
</body>
</html>
